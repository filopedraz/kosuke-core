# Dynamic configuration for Traefik
# This file is for any additional dynamic routing rules that need to be configured

# TLS Configuration
tls:
  # Request wildcard certificate for all preview subdomains
  # This dramatically speeds up preview startup by eliminating per-subdomain cert generation
  # Temporarily disabled - corrupted cert file
  # Traefik will auto-generate from ACME instead
  certificates:
    # Wildcard certificate for *.kosuke.app (preview subdomains)
    - certFile: /certs/wildcard-kosuke-app.crt
      keyFile: /certs/wildcard-kosuke-app.key
      stores:
        - default

  stores:
    default:
      defaultGeneratedCert:
        resolver: letsencrypt
        domain:
          main: '{{ env "PREVIEW_BASE_DOMAIN" }}'
          sans:
            - '*.{{ env "PREVIEW_BASE_DOMAIN" }}'
